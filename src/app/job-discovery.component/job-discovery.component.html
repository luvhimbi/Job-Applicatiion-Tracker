
<div class="container py-4"> <div class="text-center mb-4">
  <h2 class="fw-bold text-dark mb-1">Job Board Directory</h2>
  <p class="text-muted small">Explore South African and Global career hubs.</p>
</div>

  <div class="row justify-content-center mb-5">
    <div class="col-md-7 col-lg-6">
      <div class="input-group shadow-sm rounded-3 overflow-hidden border border-light-subtle">
        <span class="input-group-text bg-white border-0 ps-3"><i class="bi bi-search text-muted small"></i></span>
        <input type="text"
               class="form-control border-0 ps-2 py-2 small"
               placeholder="Search company or industry..."
               (input)="onSearch($event)">
      </div>

      <div class="d-flex justify-content-center flex-wrap gap-2 mt-3">
        <button
          *ngFor="let cat of categories"
          (click)="setFilter(cat)"
          class="btn rounded-pill px-3 py-1 small transition-all fw-medium"
          style="font-size: 0.75rem;"
          [ngClass]="(selectedCategory$ | async) === cat ? 'btn-dark' : 'btn-light border text-muted'">
          {{ cat }}
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="!(filteredSources$ | async)" class="text-center py-5">
    <div class="spinner-border spinner-border-sm text-primary" role="status"></div>
  </div>

  <div class="row g-3" *ngIf="filteredSources$ | async as sources">
    <div class="col-md-6 col-lg-4" *ngFor="let source of sources">
      <div class="card h-100 border-0 shadow-sm resource-card transition-card rounded-3" (click)="openSource(source.url)" style="cursor: pointer;">
        <div class="card-body p-3">
          <div class="d-flex align-items-start mb-3">
            <div class="icon-box rounded-2 me-3 d-flex align-items-center justify-content-center"
                 [style.backgroundColor]="source.color + '15'"
                 [style.color]="source.color"
                 style="width: 40px; height: 40px; flex-shrink: 0;">
              <i class="bi {{ source.icon }} fs-5"></i>
            </div>
            <div class="overflow-hidden">
              <span class="badge rounded-1 bg-light text-muted border mb-1" style="font-size: 0.65rem; font-weight: 600;">
                {{ source.category }}
              </span>
              <h6 class="fw-bold mb-0 text-truncate">{{ source.name }}</h6>
            </div>
          </div>

          <p class="text-muted mb-3" style="font-size: 0.8rem; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
            {{ source.description }}
          </p>

          <div class="text-primary fw-bold" style="font-size: 0.75rem;">
            Explore Opportunities <i class="bi bi-arrow-up-right ms-1"></i>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="sources.length === 0" class="text-center py-5 w-100">
      <i class="bi bi-search fs-2 text-light-emphasis"></i>
      <p class="text-muted small mt-2">No platforms found matching your criteria.</p>
    </div>
  </div>

  <nav class="mt-5" *ngIf="totalPages > 1">
    <ul class="pagination pagination-sm justify-content-center gap-1">
      <li class="page-item" [class.disabled]="(currentPage$ | async) === 1">
        <button class="page-link rounded-2 border-0 bg-light text-dark" (click)="prevPage()">
          <i class="bi bi-chevron-left"></i>
        </button>
      </li>
      <li class="page-item" [class.disabled]="(currentPage$ | async) === totalPages">
        <button class="page-link rounded-2 border-0 bg-light text-dark" (click)="nextPage()">
          <i class="bi bi-chevron-right"></i>
        </button>
      </li>
    </ul>
  </nav>
</div>
