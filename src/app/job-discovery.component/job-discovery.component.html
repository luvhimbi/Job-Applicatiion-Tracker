<div class="container py-4">
  <div class="text-center mb-4">
    <h2 class="fw-bold text-dark mb-1" style="font-size: 1.15rem; letter-spacing: -0.02em;">Find Your Next Move</h2>
    <p class="text-muted x-small">Curated career hubs from South Africa and across the globe.</p>
  </div>

  <div class="row justify-content-center mb-4">
    <div class="col-md-7 col-lg-5">
      <div class="input-group shadow-sm rounded-pill overflow-hidden border border-light-subtle bg-white">
        <span class="input-group-text bg-white border-0 ps-3">
          <i class="bi bi-search text-muted xx-small"></i>
        </span>
        <input type="text"
               class="form-control border-0 ps-2 py-2 x-small shadow-none"
               placeholder="Search company or industry..."
               (input)="onSearch($event)">
      </div>

      <div class="d-flex justify-content-center flex-wrap gap-2 mt-3">
        <button
          *ngFor="let cat of categories"
          (click)="setFilter(cat)"
          class="btn rounded-pill px-3 py-1 xx-small transition-all fw-bold border-0"
          [ngClass]="(selectedCategory$ | async) === cat ? 'btn-primary shadow-sm' : 'btn-light text-muted'">
          {{ cat }}
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="!(filteredSources$ | async)" class="text-center py-5">
    <div class="spinner-border spinner-border-sm text-primary opacity-50" role="status"></div>
  </div>

  <div class="row g-3" *ngIf="filteredSources$ | async as sources">
    <div class="col-md-6 col-lg-4" *ngFor="let source of sources">
      <div class="card h-100 border-0 shadow-sm resource-card transition-all rounded-3 bg-white"
           (click)="openSource(source.url, source.name)"
           style="cursor: pointer;">
        <div class="card-body p-3">
          <div class="d-flex align-items-start mb-2">
            <div class="icon-box rounded-circle me-3 d-flex align-items-center justify-content-center shadow-sm"
                 [style.backgroundColor]="source.color + '15'"
                 [style.color]="source.color"
                 style="width: 32px; height: 32px; flex-shrink: 0;">
              <i class="bi {{ source.icon }} fs-6"></i>
            </div>
            <div class="overflow-hidden">
              <span class="badge rounded-pill bg-light text-muted border-0 mb-1 xx-small fw-bold">
                {{ source.category }}
              </span>
              <h6 class="fw-bold mb-0 text-truncate text-dark" style="font-size: 0.85rem;">{{ source.name }}</h6>
            </div>
          </div>

          <p class="text-muted mb-3 xx-small" style="line-height: 1.5; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; height: 2.2rem;">
            {{ source.description }}
          </p>

          <div class="text-primary fw-bold xx-small d-flex align-items-center">
            Explore Opportunities <i class="bi bi-arrow-up-right ms-1" style="font-size: 0.6rem;"></i>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="sources.length === 0" class="text-center py-5 w-100">
      <i class="bi bi-cloud-slash text-light-emphasis" style="font-size: 1.5rem;"></i>
      <p class="text-muted xx-small mt-2">No platforms found matching your criteria.</p>
    </div>
  </div>

  <nav class="mt-4" *ngIf="totalPages > 1">
    <ul class="pagination pagination-sm justify-content-center gap-1">
      <li class="page-item" [class.disabled]="(currentPage$ | async) === 1">
        <button class="page-link rounded-pill border-0 bg-light text-dark px-3" (click)="prevPage()">
          <i class="bi bi-chevron-left xx-small"></i>
        </button>
      </li>
      <li class="page-item" [class.disabled]="(currentPage$ | async) === totalPages">
        <button class="page-link rounded-pill border-0 bg-light text-dark px-3" (click)="nextPage()">
          <i class="bi bi-chevron-right xx-small"></i>
        </button>
      </li>
    </ul>
  </nav>
</div>
